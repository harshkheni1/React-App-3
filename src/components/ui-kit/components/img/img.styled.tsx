import React, { FC } from 'react';
import { styled, css } from '../../utils';
import { Colors, GridBreakpointsArrayType, map, TextSize } from '../../const';
import { ImgWrapProps, ImgProps } from './types';
import { ImgFitType } from './const';

export const heightResponsive = (value: number | { [key in GridBreakpointsArrayType]?: number }) => {
  return map(value, (v) => `height: ${v}px;`);
};

export const widthResponsive = (value: number | { [key in GridBreakpointsArrayType]?: number }) => {
  return map(value, (v) => `width: ${v}px;`);
};

export const ImgWrapStyled = styled((props) => <div className={props.className}>{props.children}</div>)<ImgWrapProps>`
  background-color: ${Colors.gray100};
  background-size: 50% auto;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  color: #c7caca;
  font-size: ${TextSize.sm};
  text-align: center;
  overflow: hidden;
  position: relative;
  ${({ src }) =>
    !src &&
    `
    padding: 50% 0 0;
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOTciIGhlaWdodD0iOTMiIHZpZXdCb3g9IjAgMCAxOTcgOTMiPiAgICA8cGF0aCBmaWxsPSIjQ0ZEMEQwIiBkPSJNMjcgODMuNjY3Yy41MTMgMCAuOTM2LjM4Ni45OTMuODgzbC4wMDcuMTE3djQuODg5YzAgMS44MzgtMS40NDEgMy4zNC0zLjI1NSAzLjQzOWwtLjE5LjAwNUg3LjQ0NmMtMS44NCAwLTMuMzQyLTEuNDQxLTMuNDQtMy4yNTVMNCA4OS41NTV2LTQuODg4YzAtLjU1My40NDgtMSAxLTEgLjUxMyAwIC45MzYuMzg2Ljk5My44ODNsLjAwNy4xMTd2NC44ODljMCAuNzUuNTczIDEuMzY3IDEuMzA1IDEuNDM3bC4xNC4wMDdoMTcuMTFjLjc1MSAwIDEuMzY4LS41NzMgMS40MzgtMS4zMDVsLjAwNy0uMTR2LTQuODg4YzAtLjU1My40NDgtMSAxLTF6TTE2NyA4MWMuNTUyIDAgMSAuNDQ4IDEgMXYyaDJjLjU1MiAwIDEgLjQ0OCAxIDFzLS40NDggMS0xIDFoLTJ2MmMwIC41NTItLjQ0OCAxLTEgMXMtMS0uNDQ4LTEtMWwtLjAwMS0ySDE2NGMtLjU1MiAwLTEtLjQ0OC0xLTFzLjQ0OC0xIDEtMWgydi0yYzAtLjU1Mi40NDgtMSAxLTF6TTE4LjQ0NCA4MmMyLjkxNSAwIDUuMjc4IDIuMzYzIDUuMjc4IDUuMjc4IDAgLjU1Mi0uNDQ3IDEtMSAxLS41NTIgMC0xLS40NDgtMS0xIDAtMS43NDgtMS4zNjgtMy4xNzYtMy4wOTItMy4yNzNMMTguNDQ0IDg0aC00Ljg4OGMtMS44MSAwLTMuMjc4IDEuNDY4LTMuMjc4IDMuMjc4IDAgLjU1Mi0uNDQ4IDEtMSAxLS41NTMgMC0xLS40NDgtMS0xIDAtMi44NDIgMi4yNDYtNS4xNiA1LjA2LTUuMjc0bC4yMTgtLjAwNGg0Ljg4OHpNMTc5IDg0djJoLTJ2LTJoMnptNCAwdjJoLTJ2LTJoMnptNCAwdjJoLTJ2LTJoMnpNNTguMzMzIDgydjJINTN2LTJoNS4zMzN6bTYwIDB2MmgtNnYtMmg2em0tMTIgMHYyaC02di0yaDZ6bS0xMiAwdjJoLTZ2LTJoNnptLTEyIDB2MmgtNnYtMmg2em0tMTIgMHYyaC02di0yaDZ6TTE2IDczLjY2N2MyLjAyNSAwIDMuNjY3IDEuNjQxIDMuNjY3IDMuNjY2UzE4LjAyNSA4MSAxNiA4MXMtMy42NjctMS42NDItMy42NjctMy42NjcgMS42NDItMy42NjYgMy42NjctMy42NjZ6bTEwNiAwdjZoLTJ2LTZoMnptLTEwNiAyYy0uOTIgMC0xLjY2Ny43NDYtMS42NjcgMS42NjYgMCAuOTIuNzQ3IDEuNjY3IDEuNjY3IDEuNjY3czEuNjY3LS43NDYgMS42NjctMS42NjdjMC0uOTItLjc0Ny0xLjY2Ni0xLjY2Ny0xLjY2NnpNMjQuNTU2IDY5bC4xODkuMDA1YzEuNzUxLjA5NSAzLjE1NSAxLjQ5OSAzLjI1IDMuMjVsLjAwNS4xOXY0Ljg4OGwtLjAwNy4xMTdjLS4wNTcuNDk3LS40OC44ODMtLjk5My44ODNzLS45MzYtLjM4Ni0uOTkzLS44ODNMMjYgNzcuMzMzdi00Ljg4OWwtLjAwNy0uMTM5Yy0uMDY1LS42ODYtLjYxMi0xLjIzMy0xLjI5OC0xLjI5OGwtLjE0LS4wMDdIMjAuODlsLS4xMTctLjAwN2MtLjQ5Ny0uMDU3LS44ODMtLjQ4LS44ODMtLjk5M3MuMzg2LS45MzYuODgzLS45OTNMMjAuODkgNjloMy42Njd6TTExLjExIDY5bC4xMTcuMDA3Yy40OTcuMDU3Ljg4My40OC44ODMuOTkzcy0uMzg2LjkzNi0uODgzLjk5M0wxMS4xMSA3MUg3LjQ0NGwtLjEzOS4wMDdjLS42ODYuMDY1LTEuMjMzLjYxMi0xLjI5OCAxLjI5OGwtLjAwNy4xNHY0Ljg4OGwtLjAwNy4xMTdjLS4wNTcuNDk3LS40OC44ODMtLjk5My44ODNzLS45MzYtLjM4Ni0uOTkzLS44ODNMNCA3Ny4zMzN2LTQuODg5bC4wMDUtLjE4OWMuMDk1LTEuNzUxIDEuNDk5LTMuMTU1IDMuMjUtMy4yNWwuMTktLjAwNWgzLjY2NnpNNTUgNzAuMzMzdjZoLTJ2LTZoMnpNMTM3IDBjLjUxMyAwIC45MzYuMzg2Ljk5My44ODNMMTM4IDF2NjZjMCAuNTEzLS4zODYuOTM2LS44ODMuOTkzTDEzNyA2OEg3MGMtLjUxMyAwLS45MzYtLjM4Ni0uOTkzLS44ODNMNjkgNjdWMWMwLS41MTMuMzg2LS45MzYuODgzLS45OTNMNzAgMGg2N3ptLTEgMkg3MXY2NGg2NVYyek01NSA1OC4zMzN2NmgtMnYtNmgyek0xMzEgNmMuNTEzIDAgLjkzNi4zODYuOTkzLjg4M0wxMzIgN3Y1NGMwIC41MTMtLjM4Ni45MzYtLjg4My45OTNMMTMxIDYySDc2Yy0uNTEzIDAtLjkzNi0uMzg2LS45OTMtLjg4M0w3NSA2MVY3YzAtLjUxMy4zODYtLjkzNi44ODMtLjk5M0w3NiA2aDU1em00My4xNDggNTMuNzY5bC40MjggMS45NTRjLS43MDguMTU1LTEuNDMyLjI0NS0yLjE2NS4yN2wtLjA2Ny0xLjk5OWMuNjExLS4wMiAxLjIxNS0uMDk2IDEuODA0LS4yMjV6bS01LjQxOS0uMzE2Yy41NzIuMTk4IDEuMTYyLjM0MyAxLjc2NS40MzRsLS4yOTkgMS45NzhjLS43MjQtLjExLTEuNDMzLS4yODQtMi4xMi0uNTIybC42NTQtMS44OXptOC43Mi0xLjA2NmwxLjA5IDEuNjc2Yy0uNjEuMzk4LTEuMjU2LjczOS0xLjkzIDEuMDJsLS43NjgtMS44NDdjLjU2LS4yMzMgMS4wOTgtLjUxOCAxLjYwNy0uODQ5em0tMTEuOTA5LS43NTNjLjQ2NC4zOTIuOTYyLjc0MiAxLjQ4OCAxLjA0NWwtLjk5NSAxLjczNGMtLjYzMi0uMzYzLTEuMjMtLjc4Mi0xLjc4Ni0xLjI1M2wxLjI5My0xLjUyNnpNODguMjUxIDMzLjIyOEw3NyA0MC41NDJWNjBoNTN2LTkuNDMybC0xNS44MTktOS40Mi04Ljg0NyA0LjczNGMtLjI3My4xNDUtLjU5Mi4xNTUtLjg2Ny4wMzdsLS4xMTUtLjA1OS0uMTA4LS4wNzMtMTUuOTkzLTEyLjU1OXptOTEuODcgMjIuNjFsMS42MjIgMS4xNjhjLS40MjUuNTkxLS45MDQgMS4xNDMtMS40MyAxLjY0OGwtMS4zODUtMS40NDNjLjQzOC0uNDIuODM3LS44OCAxLjE5Mi0xLjM3M3ptLTE2Ljg4Mi0xLjAxM2MuMjkzLjUzMS42MzUgMS4wMzUgMS4wMiAxLjUwNWwtMS41NDggMS4yNjdjLS40NjItLjU2My0uODcxLTEuMTY4LTEuMjIzLTEuODA2bDEuNzUtLjk2NnptLTEuMTQtMy40MDdjLjA4Ni42MDQuMjI2IDEuMTk1LjQxOSAxLjc2OGwtMS44OTYuNjM3Yy0uMjMxLS42ODktLjQtMS40LS41MDMtMi4xMjRsMS45OC0uMjgxek01NSA0Ni4zMzN2NmgtMnYtNmgyek0xOTAuNjEzIDI2LjIxbC4wOTQuMDgzIDYgNmMuMzYuMzYuMzg4LjkyOC4wODMgMS4zMmwtLjA4My4wOTRMMTc5LjcxNSA1MC43bC0uMDA4LjAwOC0uMDA4LjAwNy0uMTM1LjEzNmMtLjEyNi4xMjYtLjI4Mi4yMTUtLjQ1My4yNmwtLjEzLjAyNS02Ljg1Ny44NTdjLS42MDkuMDc2LTEuMTMyLS40MDYtMS4xMjQtMS4wMDNsLjAwOC0uMTEzLjg1Ny02Ljg1N2MuMDIyLS4xNzcuMDktLjM0My4xOTgtLjQ4M2wuMDg3LS4xIDE3LjE0My0xNy4xNDNjLjM2LS4zNi45MjgtLjM4OCAxLjMyLS4wODN6TTE1IDQ4Yy41NTIgMCAxIC40NDggMSAxcy0uNDQ4IDEtMSAxSDFjLS41NTIgMC0xLS40NDgtMS0xcy40NDgtMSAxLTF6bTE1OC42MjctMS45NTlsLS40NzUgMy44MDcgMy44MDUtLjQ3Ny0zLjMzLTMuMzN6bS0xMy4zMjMgMS4yNjRsMS45NS40NDdjLS4xMzYuNTg5LS4yMTcgMS4xOS0uMjQ0IDEuODAybC0xLjk5OC0uMDg3Yy4wMzItLjczMy4xMy0xLjQ1Ni4yOTItMi4xNjJ6TTE5MCAzNC40MTRMMTc3LjQxNSA0NyAxNzkgNDguNTg1bDEyLjU4NS0xMi41ODZMMTkwIDM0LjQxNHpNMTMwIDhINzd2MzAuMTU2bDEwLjc2LTYuOTk0Yy4zMjQtLjIxLjczNC0uMjE0IDEuMDU5LS4wMmwuMTA0LjA3MSAxNi4wNDMgMTIuNTk3IDguNzctNC42OTJjLjIzMi0uMTI0LjUtLjE1Ljc0Ni0uMDhsLjEyMi4wNDQuMTE2LjA1OUwxMzAgNDguMjRWOHptMzIuMDQ4IDM1LjI5MmwxLjY1OCAxLjEyYy0uMzQuNTAzLS42MzMgMS4wMzYtLjg3NiAxLjU5MmwtMS44MzMtLjhjLjI5Mi0uNjY4LjY0NC0xLjMwOCAxLjA1MS0xLjkxMnptMjQuOTUtMTEuODc5bC0xMi41ODQgMTIuNTg2TDE3NiA0NS41ODUgMTg4LjU4NiAzM2wtMS41ODctMS41ODd6bS0yMS44OTUgOC43NjZsMS4xNSAxLjYzNmMtLjQ5Ni4zNS0uOTYuNzQzLTEuMzg2IDEuMTc3bC0xLjQyNy0xLjQwMmMuNTEtLjUyIDEuMDY3LS45OTIgMS42NjMtMS40MXptNC4wNTMtMS44NGwuNDcyIDEuOTQ0Yy0uNTkuMTQzLTEuMTY2LjM0LTEuNzE4LjU4OWwtLjgyLTEuODI1Yy42NjUtLjI5OCAxLjM1Ni0uNTM1IDIuMDY2LS43MDh6TTU1IDM0LjMzM3Y2aC0ydi02aDJ6bTEzNC45OTktNS45MTlsLTEuNTg1IDEuNTg1TDE5MyAzNC41ODUgMTk0LjU4NSAzM2wtNC41ODYtNC41ODZ6TTU1IDIyLjMzNHY2aC0ydi02aDJ6TTExOCAxOGMyLjc2MSAwIDUgMi4yMzkgNSA1cy0yLjIzOSA1LTUgNS01LTIuMjM5LTUtNSAyLjIzOS01IDUtNXptMCAyYy0xLjY1NyAwLTMgMS4zNDMtMyAzczEuMzQzIDMgMyAzIDMtMS4zNDMgMy0zLTEuMzQzLTMtMy0zem0tNTYuOTYtM3YyaC01LjM3M3YtMmg1LjM3M3oiLz48L3N2Zz4=);
  `}
  ${({ height }) => (height ? heightResponsive(height) : 'height: auto;')}
`;

export const ImgBlockStyled = styled('div')`
  position: relative;
`;

const ImgFullWidth = css`
  width: 100%;
  display: block;
`;

const ImgFit = (fit: ImgFitType) => css`
  object-fit: ${fit};
  object-position: 50% 50%;
  max-width: 100%;
`;

export const ImgChild: FC<ImgProps> = (props) => {
  const { className, src, alt, onClick, style } = props;
  return <img {...{ className, src, alt, onClick, style }} />;
};

export const ImgStyled = styled(ImgChild)<ImgProps>`
  display: inline-block;
  background-color: ${({ bg }) => Colors[bg]};
  ${({ fit }) => fit && ImgFit(fit)}
  ${({ fullWidth }) => fullWidth && ImgFullWidth}
  ${({ height, heightContext }) => heightResponsive(heightContext || height)}
  ${({ width }) => width && widthResponsive(width)}
`;
